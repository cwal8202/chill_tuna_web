{% extends 'base.html' %}
{% load static %}

{% block extra_head %}
  <link href="{% static 'css/chat/chat.css' %}" rel="stylesheet">
{% endblock %}

{% block title %}í˜ë¥´ì†Œë‚˜ ì±„íŒ…{% endblock %}

{% block content %}
<div class="chat-wrapper">

  <!-- ğŸ”¹ í˜ë¥´ì†Œë‚˜ ì •ë³´ -->
  <div class="persona-info">
    <div class="persona-header">ğŸ§  <strong>í˜ë¥´ì†Œë‚˜{{ persona.id }} - {{ persona.name }}</strong></div>
    <div class="persona-tags">
      <div>{{ persona.age_group }}, {{ persona.gender }}, {{ persona.family_structure }}</div>
      <div>{{ persona.purchase_pattern|join:", " }}</div>
      <div>{{ persona.customer_value }}</div>
      <div>{{ persona.lifestyle|join:", " }}</div>
    </div>
  </div>

  <!-- ğŸ”¹ ì±„íŒ… ë©”ì‹œì§€ ëª©ë¡ -->
  {% if chat_messages %}
    {% for msg in chat_messages %}
      <div class="chat-row {% if msg.sender == 'user' %}user{% else %}ai{% endif %}">
        <div class="chat-bubble">{{ msg.message }}</div>
      </div>
    {% endfor %}
  {% else %}
    <!-- ì´ˆê¸° ì•ˆë‚´ ë©”ì‹œì§€ -->
    <div class="chat-system-msg">
      ì–´ë–¤ ë¹„ì¦ˆë‹ˆìŠ¤ ì‹œë®¬ë ˆì´ì…˜ì„ ì›í•˜ì‹œë‚˜ìš”?<br>
      ì‹ ì œí’ˆ, ê¸°ì¡´ì œí’ˆì— ëŒ€í•œ êµ¬ë§¤ì˜í–¥ì„ ë¬¼ì–´ë³´ì„¸ìš”.<br>
      ë˜ëŠ” ì–´ë–¤ í”„ë¡œëª¨ì…˜ì„ í–ˆì„ ë•Œ ì´ ê³ ê°ì´ êµ¬ë§¤í•  ì˜í–¥ì´ ìƒê¸¸ì§€ ë¬¼ì–´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    </div>
  {% endif %}

  <!-- ğŸ”¹ ì…ë ¥ì°½ -->
  <div class="chat-input-container">
    <div class="chat-input-box">
      <input type="text" class="chat-input" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”...">
      <button class="chat-send-btn">ğŸ“¤</button>
    </div>
    <div class="chat-footer-note">
      Chill Tuna ë¹„ì¦ˆë‹ˆìŠ¤ ì‹œë®¬ë ˆì´í„°ëŠ” ì‹¤ìˆ˜ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
      ì°¸ê³ ìš©ìœ¼ë¡œ ì‚¬ìš©í•˜ì„¸ìš”.
    </div>
  </div>

</div>
{% endblock %}
